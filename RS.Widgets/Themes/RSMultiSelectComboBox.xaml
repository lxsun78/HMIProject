<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:RS.Widgets.Converters"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:model="clr-namespace:RS.Widgets.Models"
    xmlns:rs="clr-namespace:RS.Widgets.Controls">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.Border.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.Button.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.DataGrid.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.Templates.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.Effects.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.Icons.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.Path.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.TextBox.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.ComboBoxItem.xaml" />
        <ResourceDictionary Source="pack://application:,,,/RS.Widgets;component/Styles/Controls.ToggleButton.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <converters:ClipConverter x:Key="ClipConverter" />

    <Style BasedOn="{StaticResource RSApp.Styles.DataGridStyle}" TargetType="{x:Type rs:RSMultiSelectComboBox}">
        <Setter Property="Foreground" Value="#FF333333" />
        <Setter Property="BorderBrush" Value="#eee" />
        <Setter Property="Background" Value="#fff" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="HeadersVisibility" Value="Column" />
        <Setter Property="MinRowHeight" Value="32" />
        <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
        <Setter Property="VerticalGridLinesBrush" Value="#e5e6eb" />
        <Setter Property="HorizontalGridLinesBrush" Value="#e5e6eb" />
        <Setter Property="GridLinesVisibility" Value="Horizontal" />
        <Setter Property="AutoGenerateColumns" Value="False" />
        <Setter Property="RowDetailsVisibilityMode" Value="VisibleWhenSelected" />
        <Setter Property="ScrollViewer.CanContentScroll" Value="true" />
        <Setter Property="ScrollViewer.PanningMode" Value="Both" />
        <Setter Property="Stylus.IsFlicksEnabled" Value="False" />
        <Setter Property="SelectionMode" Value="Extended" />
        <Setter Property="CanUserAddRows" Value="False" />
        <Setter Property="CanUserDeleteRows" Value="False" />
        <Setter Property="CanUserReorderColumns" Value="False" />
        <Setter Property="CanUserResizeRows" Value="False" />
        <Setter Property="CanUserSortColumns" Value="False" />
        <Setter Property="EnableRowVirtualization" Value="True" />
        <Setter Property="EnableColumnVirtualization" Value="True" />
        <Setter Property="rs:ControlsHelper.IconHeight" Value="40" />
        <Setter Property="rs:ControlsHelper.IconWidth" Value="50" />
        <Setter Property="IsReadOnly" Value="True" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="rs:TextBoxHelper.Watermark" Value="请选择内容" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="#eeeeee" />
        <Setter Property="rs:ControlsHelper.CornerRadius" Value="3" />
        <Setter Property="Margin" Value="3,3,3,3" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="HeadersVisibility" Value="None" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type rs:RSMultiSelectComboBox}">
                    <Border
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{TemplateBinding rs:ControlsHelper.CornerRadius}">
                        <Grid>
                            <rs:RSMultiSelectTextBox
                                x:Name="PART_MultiSelectTextBox"
                                Margin="0"
                                rs:TextBoxHelper.Watermark="{TemplateBinding rs:TextBoxHelper.Watermark}"
                                BorderThickness="0" />
                            <rs:RSPopup
                                x:Name="Popup"
                                AllowsTransparency="True"
                                Focusable="False"
                                IsOpen="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=IsDropDownOpen, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                Placement="Bottom"
                                PlacementTarget="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                PopupAnimation="None"
                                RelativeElement="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                StaysOpen="True"
                                VerticalOffset="3">
                                <Border
                                    Width="{TemplateBinding ActualWidth}"
                                    MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                    Margin="15"
                                    Background="#FFF"
                                    CornerRadius="{TemplateBinding rs:ControlsHelper.CornerRadius}"
                                    Effect="{StaticResource RSApp.Styles.DefaultEffect}">
                                    <Grid>
                                        <ScrollViewer x:Name="DG_ScrollViewer" Focusable="false">
                                            <ScrollViewer.Template>
                                                <ControlTemplate TargetType="{x:Type ScrollViewer}">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>
                                                        <Button
                                                            Width="{Binding CellsPanelHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                            Command="{x:Static DataGrid.SelectAllCommand}"
                                                            Focusable="false"
                                                            Style="{DynamicResource {ComponentResourceKey ResourceId=DataGridSelectAllButtonStyle,
                                                                                                          TypeInTargetAssembly={x:Type DataGrid}}}"
                                                            Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.All}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />



                                                        <DataGridColumnHeadersPresenter
                                                            x:Name="PART_ColumnHeadersPresenter"
                                                            Grid.Column="1"
                                                            Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Column}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />


                                                        <Grid Grid.Row="1" Grid.ColumnSpan="2">
                                                            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" CanContentScroll="{TemplateBinding CanContentScroll}" />

                                                            <ContentControl
                                                                x:Name="PART_EmptyData"
                                                                rs:ControlsHelper.EmptyDataDes="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=(rs:ControlsHelper.EmptyDataDes)}"
                                                                rs:ControlsHelper.IconData="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=(rs:ControlsHelper.IconData)}"
                                                                rs:ControlsHelper.IconHeight="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=(rs:ControlsHelper.IconHeight)}"
                                                                rs:ControlsHelper.IconWidth="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=(rs:ControlsHelper.IconWidth)}"
                                                                Template="{StaticResource RSApp.Templates.EmptyData}"
                                                                Visibility="Collapsed" />
                                                        </Grid>


                                                        <ScrollBar
                                                            x:Name="PART_VerticalScrollBar"
                                                            Grid.Row="1"
                                                            Grid.Column="2"
                                                            Maximum="{TemplateBinding ScrollableHeight}"
                                                            Orientation="Vertical"
                                                            ViewportSize="{TemplateBinding ViewportHeight}"
                                                            Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                                            Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />

                                                        <Grid Grid.Row="2" Grid.Column="1">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="{Binding NonFrozenColumnsViewportHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
                                                                <ColumnDefinition Width="*" />
                                                            </Grid.ColumnDefinitions>

                                                            <ScrollBar
                                                                x:Name="PART_HorizontalScrollBar"
                                                                Grid.Column="1"
                                                                Maximum="{TemplateBinding ScrollableWidth}"
                                                                Orientation="Horizontal"
                                                                ViewportSize="{TemplateBinding ViewportWidth}"
                                                                Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                                                Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />
                                                        </Grid>
                                                    </Grid>

                                                    <ControlTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}, Path=HasItems}" Value="False">
                                                            <Setter TargetName="PART_EmptyData" Property="Visibility" Value="Visible" />
                                                        </DataTrigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </ScrollViewer.Template>
                                            <ItemsPresenter />
                                        </ScrollViewer>
                                    </Grid>
                                </Border>
                            </rs:RSPopup>
                        </Grid>
                    </Border>



                    <ControlTemplate.Triggers>

                        <!--<Trigger Property="HasItems" Value="False">
                            <Setter TargetName="PART_EmptyData" Property="Visibility" Value="Visible" />
                        </Trigger>-->

                        <Trigger Property="Validation.HasError" Value="True">
                            <Setter Property="BorderBrush" Value="Transparent" />
                        </Trigger>

                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="PART_MultiSelectTextBox" Property="IsShowBtnClear" Value="True" />
                        </Trigger>

                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>

        <!--<Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="{x:Type ListBoxItem}">
                    <Setter Property="OverridesDefaultStyle" Value="True" />
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                    <Setter Property="VerticalContentAlignment" Value="Stretch" />
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="IsTabStop" Value="False" />
                    <Setter Property="FontSize" Value="12" />
                    <Setter Property="MinHeight" Value="36" />
                    <Setter Property="MinWidth" Value="90" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                <Border
                                    x:Name="PART_Border"
                                    Padding="{TemplateBinding Padding}"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="{TemplateBinding rs:ControlsHelper.CornerRadius}"
                                    FocusVisualStyle="{x:Null}"
                                    Focusable="True">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <Rectangle x:Name="PART_SelectIcon" Visibility="Collapsed" />
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                                    </Grid>
                                </Border>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#EEE" />
                                    </Trigger>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="PART_SelectIcon" Property="Visibility" Value="Visible" />
                                        <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBox}}, Path=(rs:ControlsHelper.SelectedBackground)}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>-->

        <!--<Style.Triggers>
            <Trigger Property="VirtualizingPanel.IsVirtualizing" Value="true">
                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel IsItemsHost="True" />
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>-->
    </Style>
</ResourceDictionary>